
sampler2D texDif;

sampler2D texDet[8];

struct PSInput
{
    float2 TexCoord1 : TEXCOORD0; 
    float2 TexCoord2 : TEXCOORD1; 
    float3 Normal : TEXCOORD2;
};

struct PSOutput
{
    float4 Color : COLOR;
};

PSOutput main(PSInput ip)
{
    PSOutput o;
    float3 lightDir = float3(1,0,0);
    float ndl = dot(ip.Normal, lightDir);
	
	float4 index = 255* tex2D(texDif, ip.TexCoord1);
	
	float4 high = (index - 15) / 16;
	
	
	float4 color = 0;
	color += (dist[0]) * tex2D(texD1, ip.TexCoord2);
	color += (dist[1]) * tex2D(texD2, ip.TexCoord2);
	color += (dist[2]) * tex2D(texD3, ip.TexCoord2);
	color += (dist[3]) * tex2D(texD4, ip.TexCoord2);
	

    o.Color = color;//tex2D(texDif, ip.TexCoord1);// * max( 0.3, ndl );
    return o;
}
